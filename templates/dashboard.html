<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matrix Encryption Service | Advanced Parallel Computing</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
        }
        
        .service-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 400% 400%;
            animation: gradient 12s ease infinite;
        }
        
        @keyframes gradient {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .chart-container {
            background: linear-gradient(145deg, #ffffff, #f8fafc);
            border: 1px solid rgba(226, 232, 240, 0.8);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .metric-card {
            background: linear-gradient(145deg, #ffffff, #f8fafc);
            border: 1px solid rgba(226, 232, 240, 0.8);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }

        .metric-card:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .worker-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin: 0 3px;
            animation: workerPulse 2s ease-in-out infinite;
        }

        .worker-indicator.active {
            background: #10b981;
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
        }

        .worker-indicator.inactive {
            background: #6b7280;
        }

        @keyframes workerPulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }

        .thread-timeline-bar {
            height: 30px;
            border-radius: 6px;
            margin: 2px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        .thread-timeline-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
       <!-- Navigation -->
       <nav class="bg-white/80 backdrop-blur-md shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center">
                        <i class="fas fa-matrix-org text-white text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-800">Matrix Encryption</h1>
                        <p class="text-sm text-gray-600">Parallel Computing Service</p>
                    </div>
                </div>
                <div class="flex items-center space-x-6">
                    <a href="#features" class="text-gray-600 hover:text-blue-600 transition">Features</a>
                    <a href="#algorithms" class="text-gray-600 hover:text-blue-600 transition">Algorithms</a>
                    <a href="#performance" class="text-gray-600 hover:text-blue-600 transition">Performance</a>
                    <button onclick="window.open('https://github.com/muhammad7865/matrix-encryption-service', '_blank')" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 py-2 rounded-lg hover:shadow-lg transition">
                        <i class="fab fa-github mr-2"></i>GitHub
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="service-gradient text-white py-20">
        <div class="container mx-auto px-4 text-center">
            <div class="max-w-4xl mx-auto">
                <h1 class="text-6xl font-bold mb-6">
                    Parallelized Encryption-as-a-Service
                    <span class="block text-4xl mt-2 text-blue-100">Using Matrix Transformations</span>
                </h1>
                <p class="text-xl text-blue-100 mb-8 leading-relaxed">
                    Advanced cryptographic operations powered by distributed computing and linear algebra. 
                    Experience the future of secure data processing with our matrix-based encryption algorithms.
                </p>
                <div class="flex justify-center space-x-8 text-center">
                    <div class="bg-white/20 backdrop-blur-md rounded-lg p-4">
                        <div class="text-3xl font-bold">3</div>
                        <div class="text-sm">Algorithms</div>
                    </div>
                    <div class="bg-white/20 backdrop-blur-md rounded-lg p-4">
                        <div class="text-3xl font-bold">âˆž</div>
                        <div class="text-sm">Scalability</div>
                    </div>
                    <div class="bg-white/20 backdrop-blur-md rounded-lg p-4">
                        <div class="text-3xl font-bold">24/7</div>
                        <div class="text-sm">Service</div>
                    </div>
                    <div class="bg-white/20 backdrop-blur-md rounded-lg p-4">
                        <div class="text-3xl font-bold" id="cpu-count">4</div>
                        <div class="text-sm">CPU Cores</div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Features Section -->
    <section id="features" class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gray-800 mb-4">Key Features</h2>
                <p class="text-xl text-gray-600">Advanced encryption capabilities with enterprise-grade performance</p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-8">
                <div class="text-center p-6">
                    <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center">
                        <i class="fas fa-bolt text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-3">Parallel Processing</h3>
                    <p class="text-gray-600">Leverage multiple CPU cores for faster encryption and decryption operations</p>
                </div>
                
                <div class="text-center p-6">
                    <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center">
                        <i class="fas fa-shield-alt text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-3">Secure Algorithms</h3>
                    <p class="text-gray-600">Multiple matrix-based encryption algorithms for different security needs</p>
                </div>
                
                <div class="text-center p-6">
                    <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center">
                        <i class="fas fa-chart-line text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-3">Performance Analytics</h3>
                    <p class="text-gray-600">Real-time performance monitoring and benchmarking capabilities</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Algorithm Selection -->
    <section id="algorithms" class="py-16 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gray-800 mb-4">Encryption Algorithms</h2>
                <p class="text-xl text-gray-600">Choose from our advanced matrix-based encryption methods</p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-8 mb-12">
                <!-- Hill Cipher -->
                <div class="algorithm-card bg-white rounded-xl shadow-lg p-8 border-l-4 border-blue-500 hover:border-blue-600">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                            <i class="fas fa-calculator feature-icon text-2xl"></i>
                        </div>
                        <h3 class="text-2xl font-semibold text-blue-600">Hill Cipher</h3>
                    </div>
                    <p class="text-gray-600 mb-6">Classical matrix-based encryption using modular arithmetic. Perfect for educational cryptography and text encryption with mathematical elegance.</p>
                    <div class="space-y-2">
                        <div class="flex items-center text-sm text-gray-500">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            <span>Modular matrix operations</span>
                        </div>
                        <div class="flex items-center text-sm text-gray-500">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            <span>Text-optimized algorithm</span>
                        </div>
                        <div class="flex items-center text-sm text-gray-500">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            <span>Educational cryptography</span>
                        </div>
                    </div>
                </div>
                
                <!-- Matrix Transformation -->
                <div class="algorithm-card bg-white rounded-xl shadow-lg p-8 border-l-4 border-green-500 hover:border-green-600">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4">
                            <i class="fas fa-sync-alt feature-icon text-2xl"></i>
                        </div>
                        <h3 class="text-2xl font-semibold text-green-600">Matrix Transformation</h3>
                    </div>
                    <p class="text-gray-600 mb-6">Advanced linear algebra transformations for both text and binary data encryption with rotation matrices and high performance.</p>
                    <div class="space-y-2">
                        <div class="flex items-center text-sm text-gray-500">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            <span>Rotation-based transforms</span>
                        </div>
                        <div class="flex items-center text-sm text-gray-500">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            <span>File & text support</span>
                        </div>
                        <div class="flex items-center text-sm text-gray-500">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            <span>High performance</span>
                        </div>
                    </div>
                </div>
                
                <!-- Advanced Matrix -->
                <div class="algorithm-card bg-white rounded-xl shadow-lg p-8 border-l-4 border-purple-500 hover:border-purple-600">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-4">
                            <i class="fas fa-brain feature-icon text-2xl"></i>
                        </div>
                        <h3 class="text-2xl font-semibold text-purple-600">Advanced Matrix</h3>
                    </div>
                    <p class="text-gray-600 mb-6">Sophisticated matrix encryption with diagonal dominance and complex mathematical properties for enterprise-grade security.</p>
                    <div class="space-y-2">
                        <div class="flex items-center text-sm text-gray-500">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            <span>Complex matrix properties</span>
                        </div>
                        <div class="flex items-center text-sm text-gray-500">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            <span>Enterprise-grade security</span>
                        </div>
                        <div class="flex items-center text-sm text-gray-500">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            <span>Optimized for parallel processing</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Service Configuration -->
    <section class="py-8 bg-white">
        <div class="container mx-auto px-6">
            <div class="chart-container rounded-2xl p-8">
                <div class="flex items-center mb-6">
                    <i class="fas fa-cogs text-2xl text-blue-600 mr-3"></i>
                    <h2 class="text-2xl font-semibold text-gray-800">Service Configuration</h2>
                </div>
                
                <div class="grid md:grid-cols-4 gap-6">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fas fa-algorithm mr-2"></i>Algorithm
                        </label>
                        <select id="algorithm" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="hill_cipher">Hill Cipher</option>
                            <option value="matrix_transform">Matrix Transformation</option>
                            <option value="advanced_matrix">Advanced Matrix</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fas fa-microchip mr-2"></i>Processing Method
                        </label>
                        <select id="processingMethod" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="parallel">Parallel Processing</option>
                            <option value="serial">Serial Processing</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fas fa-users mr-2"></i>Worker Threads
                        </label>
                        <select id="numWorkers" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="1">1 Worker</option>
                            <option value="2">2 Workers</option>
                            <option value="4" selected>4 Workers</option>
                            <option value="8">8 Workers</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fas fa-th mr-2"></i>Matrix Size
                        </label>
                        <select id="matrixSize" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="4">4x4 Matrix</option>
                            <option value="8" selected>8x8 Matrix</option>
                            <option value="16">16x16 Matrix</option>
                        </select>
                    </div>
                </div>

                <!-- Worker Status Indicator -->
                <div class="mt-6 p-4 bg-gray-50 rounded-xl">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <i class="fas fa-server text-blue-600 mr-2"></i>
                            <span class="font-semibold text-gray-700">Active Workers:</span>
                        </div>
                        <div id="workerIndicators" class="flex items-center">
                            <!-- Worker indicators will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Service Interface -->
    <main class="container mx-auto px-6 py-8">
        <!-- Service Tabs -->
        <div class="chart-container rounded-2xl shadow-2xl overflow-hidden">
            <div class="border-b border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50">
                <nav class="flex space-x-8 px-8">
                    <button class="service-tab py-4 px-2 border-b-2 border-blue-500 font-semibold text-blue-600 flex items-center" data-tab="text">
                        <i class="fas fa-lock mr-2"></i>Text Encryption
                    </button>
                    <button class="service-tab py-4 px-2 border-b-2 border-transparent font-semibold text-gray-500 hover:text-gray-700 flex items-center" data-tab="benchmark">
                        <i class="fas fa-chart-bar mr-2"></i>Performance Analysis
                    </button>
                </nav>
            </div>

            <!-- Text Encryption Tab -->
            <div id="text-tab" class="tab-content p-8">
                <div class="grid lg:grid-cols-2 gap-8">
                    <!-- Encryption Panel -->
                    <div class="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-6">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-shield-alt text-2xl text-blue-600 mr-3"></i>
                            <h3 class="text-xl font-semibold text-gray-800">Text Encryption Service</h3>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Input Text</label>
                                <textarea 
                                    id="plaintext" 
                                    rows="6" 
                                    class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                                    placeholder="Enter text to encrypt using matrix transformations..."
                                ></textarea>
                            </div>
                            
                            <button 
                                id="encryptTextBtn" 
                                class="w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-4 rounded-lg hover:from-blue-600 hover:to-blue-700 transition duration-200 font-medium flex items-center justify-center"
                            >
                                <i class="fas fa-lock mr-2"></i>
                                <span>Encrypt Text</span>
                            </button>
                            
                            <div id="encryptResult" class="hidden">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Encrypted Data</label>
                                <textarea 
                                    id="encryptedText" 
                                    rows="4" 
                                    class="w-full p-4 border border-gray-300 rounded-lg bg-gray-50 font-mono text-sm resize-none" 
                                    readonly
                                ></textarea>
                                <div id="encryptStats" class="mt-3 p-3 bg-blue-50 rounded-lg text-sm"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Decryption Panel -->
                    <div class="bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-6">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-unlock-alt text-2xl text-green-600 mr-3"></i>
                            <h3 class="text-xl font-semibold text-gray-800">Text Decryption Service</h3>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Encrypted Data</label>
                                <textarea 
                                    id="encryptedInput" 
                                    rows="6" 
                                    class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent font-mono text-sm resize-none"
                                    placeholder="Paste encrypted data here..."
                                ></textarea>
                            </div>
                            
                            <button 
                                id="decryptTextBtn" 
                                class="w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-3 px-4 rounded-lg hover:from-green-600 hover:to-green-700 transition duration-200 font-medium flex items-center justify-center"
                            >
                                <i class="fas fa-unlock mr-2"></i>
                                <span>Decrypt Text</span>
                            </button>
                            
                            <div id="decryptResult" class="hidden">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Decrypted Text</label>
                                <textarea 
                                    id="decryptedText" 
                                    rows="4" 
                                    class="w-full p-4 border border-gray-300 rounded-lg bg-gray-50 resize-none" 
                                    readonly
                                ></textarea>
                                <div id="decryptStats" class="mt-3 p-3 bg-green-50 rounded-lg text-sm"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Performance Analysis Tab -->
            <div id="benchmark-tab" class="tab-content p-8 hidden">
                <div class="flex items-center mb-6">
                    <i class="fas fa-tachometer-alt text-2xl text-indigo-600 mr-3"></i>
                    <h3 class="text-2xl font-semibold text-gray-800">Performance Analysis & Benchmarking</h3>
                </div>
                
                <div class="grid lg:grid-cols-2 gap-8">
                    <div class="bg-gradient-to-br from-purple-50 to-indigo-100 rounded-xl p-6">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Benchmark Text</label>
                                <textarea 
                                    id="benchmarkText" 
                                    rows="6" 
                                    class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"
                                >This is a comprehensive performance benchmark for the parallelized encryption-as-a-service platform. The system demonstrates matrix-based encryption algorithms with distributed computing capabilities across multiple processing units. This extended text will help demonstrate the performance differences between serial and parallel processing methods more effectively. We need sufficient text length to show meaningful parallel processing benefits and overhead analysis.</textarea>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Benchmark Iterations</label>
                                <input 
                                    type="number" 
                                    id="iterations" 
                                    value="5" 
                                    min="3" 
                                    max="1000" 
                                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                >
                            </div>
                            
                            <button 
                                id="benchmarkBtn" 
                                class="w-full bg-gradient-to-r from-purple-500 to-indigo-600 text-white py-3 px-4 rounded-lg hover:from-purple-600 hover:to-indigo-700 transition duration-200 font-medium flex items-center justify-center"
                            >
                                <i class="fas fa-rocket mr-2"></i>
                                <span>Run Performance Benchmark</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="chart-container rounded-xl p-6">
                        <canvas id="performanceChart" width="400" height="300"></canvas>
                    </div>
                </div>
                
                <!-- Processing Method Visualization -->
                <div id="processingVisualization" class="hidden mt-8">
                    <h4 class="text-xl font-semibold mb-6 flex items-center">
                        <i class="fas fa-microchip mr-2 text-blue-600"></i>
                        Processing Method Comparison
                    </h4>
                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- Serial Processing Box -->
                        <div class="metric-card rounded-xl p-6">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                                    <i class="fas fa-microchip text-blue-600 text-xl"></i>
                                </div>
                                <div>
                                    <h5 class="text-lg font-semibold text-blue-600">Serial Processing</h5>
                                    <p class="text-sm text-gray-600">Single-threaded execution</p>
                                </div>
                            </div>
                            <div id="serialMetrics" class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Average Time:</span>
                                    <span class="font-semibold" id="serialTime">-</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Speedup:</span>
                                    <span class="font-semibold" id="serialSpeedup">1.00x</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Efficiency:</span>
                                    <span class="font-semibold" id="serialEfficiency">100.0%</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Workers:</span>
                                    <span class="font-semibold">1</span>
                                </div>
                            </div>
                        </div>

                        <!-- Parallel Processing Box -->
                        <div class="metric-card rounded-xl p-6">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4">
                                    <i class="fas fa-server text-green-600 text-xl"></i>
                                </div>
                                <div>
                                    <h5 class="text-lg font-semibold text-green-600">Parallel Processing</h5>
                                    <p class="text-sm text-gray-600">Multi-threaded execution</p>
                                </div>
                            </div>
                            <div id="parallelMetrics" class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Average Time:</span>
                                    <span class="font-semibold" id="parallelTime">-</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Speedup:</span>
                                    <span class="font-semibold" id="parallelSpeedup">-</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Efficiency:</span>
                                    <span class="font-semibold" id="parallelEfficiency">-</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Workers:</span>
                                    <span class="font-semibold" id="parallelWorkers">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="benchmarkResults" class="hidden mt-8">
                    <h4 class="text-xl font-semibold mb-6 flex items-center">
                        <i class="fas fa-chart-line mr-2 text-purple-600"></i>
                        Detailed Performance Metrics
                    </h4>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                        <div class="chart-container rounded-xl p-4">
                            <canvas id="iterationChart" height="400"></canvas>
                        </div>
                        <div class="chart-container rounded-xl p-4">
                            <canvas id="speedupChart" height="400"></canvas>
                        </div>
                    </div>
                    
                    <!-- Thread Timeline Visualization -->
                    <div class="chart-container rounded-xl p-6 mt-6">
                        <h5 class="font-semibold mb-4 flex items-center">
                            <i class="fas fa-clock mr-2 text-indigo-600"></i>
                            Thread Execution Timeline (Latest Iteration)
                        </h5>
                        <div id="threadTimeline" class="space-y-2">
                            <!-- Thread timeline will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl p-6 mt-6">
                        <h5 class="font-semibold mb-3 flex items-center">
                            <i class="fas fa-info-circle mr-2 text-blue-600"></i>
                            System Information
                        </h5>
                        <div id="systemInfo" class="text-sm text-gray-600"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        let encryptedData = null;
        let performanceChart = null;
        let benchmarkRunning = false;

        // Tab switching
        document.querySelectorAll('.service-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const targetTab = this.dataset.tab;
                
                // Update tab styles
                document.querySelectorAll('.service-tab').forEach(t => {
                    t.classList.remove('border-blue-500', 'text-blue-600');
                    t.classList.add('border-transparent', 'text-gray-500');
                });
                this.classList.add('border-blue-500', 'text-blue-600');
                this.classList.remove('border-transparent', 'text-gray-500');
                
                // Show/hide content
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.add('hidden');
                });
                document.getElementById(targetTab + '-tab').classList.remove('hidden');
            });
        });

        // Update worker indicators
        function updateWorkerIndicators() {
            const numWorkers = parseInt(document.getElementById('numWorkers').value);
            const processingMethod = document.getElementById('processingMethod').value;
            const indicatorsContainer = document.getElementById('workerIndicators');
            
            indicatorsContainer.innerHTML = '';
            
            const maxWorkers = 8;
            for (let i = 0; i < maxWorkers; i++) {
                const indicator = document.createElement('div');
                indicator.className = `worker-indicator ${i < numWorkers && processingMethod === 'parallel' ? 'active' : 'inactive'}`;
                indicator.title = `Worker ${i + 1}`;
                indicatorsContainer.appendChild(indicator);
            }
            
            const statusText = document.createElement('span');
            statusText.className = 'ml-3 text-sm font-medium text-gray-600';
            statusText.textContent = processingMethod === 'parallel' ? 
                `${numWorkers} workers active` : '1 worker active (serial mode)';
            indicatorsContainer.appendChild(statusText);
        }

        // Initialize performance chart
        function initChart() {
            const ctx = document.getElementById('performanceChart').getContext('2d');
            
            performanceChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Processing Time (seconds)',
                        data: [],
                        backgroundColor: ['rgba(59, 130, 246, 0.8)', 'rgba(16, 185, 129, 0.8)'],
                        borderColor: ['#3b82f6', '#10b981'],
                        borderWidth: 2,
                        borderRadius: 8,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Performance Comparison: Serial vs Parallel Processing',
                            font: { size: 16, weight: 'bold' },
                            color: '#374151',
                            padding: 20
                        },
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Processing Time (seconds)',
                                font: { weight: 'bold', size: 12 },
                                color: '#374151'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Processing Method',
                                font: { weight: 'bold', size: 12 },
                                color: '#374151'
                            }
                        }
                    }
                }
            });
        }

        // Get CSRF token
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        // Text encryption
        document.getElementById('encryptTextBtn').addEventListener('click', async function() {
            const text = document.getElementById('plaintext').value;
            const algorithm = document.getElementById('algorithm').value;
            const processingMethod = document.getElementById('processingMethod').value;
            const numWorkers = parseInt(document.getElementById('numWorkers').value);
            const matrixSize = parseInt(document.getElementById('matrixSize').value);
            
            if (!text.trim()) {
                alert('Please enter text to encrypt');
                return;
            }
            
            this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Encrypting...';
            this.disabled = true;
            
            try {
                const response = await fetch('/api/encrypt/text/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': getCookie('csrftoken')
                    },
                    body: JSON.stringify({
                        text: text,
                        algorithm: algorithm,
                        processing_method: processingMethod,
                        num_workers: numWorkers,
                        matrix_size: matrixSize
                    })
                });
                
                const result = await response.json();
                
                if (result.error) {
                    alert('Error: ' + result.error);
                    return;
                }
                
                encryptedData = result;
                document.getElementById('encryptedText').value = result.encrypted_data;
                document.getElementById('encryptStats').innerHTML = `
                    <div class="grid grid-cols-2 gap-4">
                        <div><strong><i class="fas fa-id-badge mr-1"></i>Job ID:</strong> ${result.job_id}</div>
                        <div><strong><i class="fas fa-algorithm mr-1"></i>Algorithm:</strong> ${result.algorithm}</div>
                        <div><strong><i class="fas fa-clock mr-1"></i>Time:</strong> ${result.processing_time.toFixed(4)}s</div>
                        <div><strong><i class="fas fa-users mr-1"></i>Workers:</strong> ${result.workers_used} (requested: ${result.workers_requested})</div>
                        <div><strong><i class="fas fa-th mr-1"></i>Matrix:</strong> ${result.matrix_size}x${result.matrix_size}</div>
                        <div><strong><i class="fas fa-microchip mr-1"></i>Method:</strong> ${result.processing_method}</div>
                    </div>
                `;
                document.getElementById('encryptResult').classList.remove('hidden');
                
                // Auto-fill decryption input
                document.getElementById('encryptedInput').value = result.encrypted_data;
                
            } catch (error) {
                alert('Error: ' + error.message);
            } finally {
                this.innerHTML = '<i class="fas fa-lock mr-2"></i>Encrypt Text';
                this.disabled = false;
            }
        });

        // Text decryption
        document.getElementById('decryptTextBtn').addEventListener('click', async function() {
            const encrypted = document.getElementById('encryptedInput').value;
            const algorithm = document.getElementById('algorithm').value;
            const processingMethod = document.getElementById('processingMethod').value;
            const numWorkers = parseInt(document.getElementById('numWorkers').value);
            const matrixSize = parseInt(document.getElementById('matrixSize').value);
            
            if (!encrypted.trim()) {
                alert('Please enter encrypted data to decrypt');
                return;
            }
            
            let requestData;
            if (encryptedData && encrypted === encryptedData.encrypted_data) {
                requestData = {
                    encrypted_data: encryptedData.encrypted_data,
                    matrix_shape: encryptedData.matrix_shape,
                    algorithm: algorithm,
                    processing_method: processingMethod,
                    num_workers: numWorkers,
                    matrix_size: matrixSize
                };
            } else {
                alert('Please encrypt text first or ensure encrypted data is valid');
                return;
            }
            
            this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Decrypting...';
            this.disabled = true;
            
            try {
                const response = await fetch('/api/decrypt/text/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': getCookie('csrftoken')
                    },
                    body: JSON.stringify(requestData)
                });
                
                const result = await response.json();
                
                if (result.error) {
                    alert('Error: ' + result.error);
                    return;
                }
                
                document.getElementById('decryptedText').value = result.decrypted_text;
                document.getElementById('decryptStats').innerHTML = `
                    <div class="grid grid-cols-2 gap-4">
                        <div><strong><i class="fas fa-algorithm mr-1"></i>Algorithm:</strong> ${result.algorithm}</div>
                        <div><strong><i class="fas fa-clock mr-1"></i>Time:</strong> ${result.processing_time.toFixed(4)}s</div>
                        <div><strong><i class="fas fa-users mr-1"></i>Workers:</strong> ${result.workers_used} (requested: ${result.workers_requested})</div>
                        <div><strong><i class="fas fa-microchip mr-1"></i>Method:</strong> ${result.processing_method}</div>
                    </div>
                `;
                document.getElementById('decryptResult').classList.remove('hidden');
                
            } catch (error) {
                alert('Error: ' + error.message);
            } finally {
                this.innerHTML = '<i class="fas fa-unlock mr-2"></i>Decrypt Text';
                this.disabled = false;
            }
        });

        // Performance benchmark
        document.getElementById('benchmarkBtn').addEventListener('click', async function() {
            if (benchmarkRunning) {
                alert('Benchmark is already running. Please wait...');
                return;
            }
            
            const text = document.getElementById('benchmarkText').value;
            const algorithm = document.getElementById('algorithm').value;
            const iterations = parseInt(document.getElementById('iterations').value);
            const matrixSize = parseInt(document.getElementById('matrixSize').value);
            const numWorkers = parseInt(document.getElementById('numWorkers').value);
            
            if (!text.trim()) {
                alert('Please enter text for benchmarking');
                return;
            }
            
            benchmarkRunning = true;
            this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Running Benchmark... Please wait';
            this.disabled = true;
            
            try {
                const response = await fetch('/api/benchmark/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': getCookie('csrftoken')
                    },
                    body: JSON.stringify({
                        text: text,
                        algorithm: algorithm,
                        iterations: Math.min(iterations, 10),
                        matrix_size: matrixSize,
                        num_workers: numWorkers
                    })
                });
                
                const result = await response.json();
                
                if (result.error) {
                    alert('Error: ' + result.error);
                    return;
                }
                
                const benchmark = result.benchmark_results;
                let serialResult = benchmark.serial;
                let parallelResult = benchmark.parallel;
                
                // Update main performance chart
                const labels = ['Serial Processing', 'Parallel Processing'];
                const data = [
                    serialResult ? serialResult.avg_time : 0,
                    parallelResult ? parallelResult.avg_time : 0
                ];
                
                performanceChart.data.labels = labels;
                performanceChart.data.datasets[0].data = data;
                performanceChart.update('active');
                
                // Update processing method visualization
                document.getElementById('processingVisualization').classList.remove('hidden');
                
                // Update serial metrics
                if (serialResult) {
                    document.getElementById('serialTime').textContent = `${serialResult.avg_time.toFixed(4)}s`;
                    document.getElementById('serialSpeedup').textContent = '1.00x';
                    document.getElementById('serialEfficiency').textContent = '100.0%';
                }
                
                // Update parallel metrics
                if (parallelResult) {
                    document.getElementById('parallelTime').textContent = `${parallelResult.avg_time.toFixed(4)}s`;
                    document.getElementById('parallelSpeedup').textContent = `${parallelResult.speedup.toFixed(2)}x`;
                    document.getElementById('parallelEfficiency').textContent = `${(parallelResult.efficiency * 100).toFixed(1)}%`;
                    document.getElementById('parallelWorkers').textContent = parallelResult.workers.toString();
                }
                
                // Create per-iteration chart
                if (window.iterationChart && typeof window.iterationChart.destroy === 'function') {
                    window.iterationChart.destroy();
                }
                const iterCtx = document.getElementById('iterationChart').getContext('2d');
                const iterLabels = Array.from({length: iterations}, (_, i) => `Iteration ${i+1}`);
                
                window.iterationChart = new Chart(iterCtx, {
                    type: 'line',
                    data: {
                        labels: iterLabels,
                        datasets: [
                            {
                                label: 'Serial Processing',
                                data: serialResult.per_iteration,
                                borderColor: '#3b82f6',
                                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                fill: true,
                                tension: 0.4,
                                pointBackgroundColor: '#3b82f6',
                                pointBorderColor: '#ffffff',
                                pointBorderWidth: 2,
                                pointRadius: 6
                            },
                            {
                                label: 'Parallel Processing',
                                data: parallelResult ? parallelResult.per_iteration : [],
                                borderColor: '#10b981',
                                backgroundColor: 'rgba(16, 185, 129, 0.1)',
                                fill: true,
                                tension: 0.4,
                                pointBackgroundColor: '#10b981',
                                pointBorderColor: '#ffffff',
                                pointBorderWidth: 2,
                                pointRadius: 6
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { 
                            title: { 
                                display: true, 
                                text: 'Per-Iteration Performance Comparison',
                                font: { size: 16, weight: 'bold' },
                                color: '#374151'
                            },
                            legend: {
                                position: 'top',
                                labels: {
                                    usePointStyle: true,
                                    padding: 20,
                                    font: { size: 12 }
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                titleColor: '#ffffff',
                                bodyColor: '#ffffff',
                                borderColor: '#374151',
                                borderWidth: 1,
                                cornerRadius: 8,
                                callbacks: {
                                    label: function(context) {
                                        return `${context.dataset.label}: ${context.parsed.y.toFixed(4)}s`;
                                    }
                                }
                            }
                        },
                        scales: { 
                            y: { 
                                beginAtZero: true, 
                                title: { 
                                    display: true, 
                                    text: 'Time (seconds)',
                                    font: { weight: 'bold', size: 12 }
                                },
                                grid: {
                                    color: 'rgba(0,0,0,0.1)'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                },
                                title: {
                                    display: true,
                                    text: 'Iteration Number',
                                    font: { weight: 'bold', size: 12 }
                                }
                            }
                        },
                        animation: {
                            duration: 1500,
                            easing: 'easeInOutQuart'
                        }
                    }
                });

                // Create speedup efficiency chart
                if (window.speedupChart && typeof window.speedupChart.destroy === 'function') {
                    window.speedupChart.destroy();
                }
                const speedupCtx = document.getElementById('speedupChart').getContext('2d');
                
                window.speedupChart = new Chart(speedupCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Efficiency Used', 'Efficiency Lost'],
                        datasets: [{
                            data: [
                                parallelResult ? parallelResult.efficiency * 100 : 0,
                                parallelResult ? (1 - parallelResult.efficiency) * 100 : 100
                            ],
                            backgroundColor: ['#10b981', '#e5e7eb'],
                            borderWidth: 0,
                            cutout: '70%'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: `Parallel Efficiency: ${parallelResult ? (parallelResult.efficiency * 100).toFixed(1) : 0}%`,
                                font: { size: 16, weight: 'bold' },
                                color: '#374151'
                            },
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 20,
                                    font: { size: 12 }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.label}: ${context.parsed.toFixed(1)}%`;
                                    }
                                }
                            }
                        }
                    }
                });

                // Create thread timeline visualization
                const timelineContainer = document.getElementById('threadTimeline');
                timelineContainer.innerHTML = '';
                
                if (parallelResult && parallelResult.thread_times && parallelResult.thread_times.length > 0) {
                    const latestIteration = parallelResult.thread_times[parallelResult.thread_times.length - 1];
                    const colors = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#06b6d4', '#84cc16', '#f97316'];
                    
                    latestIteration.forEach((thread, index) => {
                        const threadBar = document.createElement('div');
                        threadBar.className = 'thread-timeline-bar';
                        threadBar.style.backgroundColor = colors[index % colors.length];
                        threadBar.style.width = `${Math.min(100, 20 + (thread.duration * 1000))}%`;
                        threadBar.innerHTML = `
                            <span>Thread ${thread.worker_id + 1}</span>
                            <span class="ml-2 text-xs opacity-75">${(thread.duration * 1000).toFixed(1)}ms</span>
                        `;
                        timelineContainer.appendChild(threadBar);
                    });
                } else {
                    timelineContainer.innerHTML = '<p class="text-gray-500 text-center py-4">No thread timing data available</p>';
                }
                
                // Update system information
                document.getElementById('systemInfo').innerHTML = `
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div><strong><i class="fas fa-algorithm mr-1"></i>Algorithm:</strong> ${result.algorithm}</div>
                        <div><strong><i class="fas fa-file-alt mr-1"></i>Text Length:</strong> ${result.text_length.toLocaleString()} characters</div>
                        <div><strong><i class="fas fa-redo mr-1"></i>Iterations:</strong> ${result.iterations}</div>
                        <div><strong><i class="fas fa-microchip mr-1"></i>CPU Cores:</strong> ${result.system_info.cpu_count}</div>
                        <div><strong><i class="fas fa-th mr-1"></i>Matrix Size:</strong> ${result.system_info.matrix_size}x${result.system_info.matrix_size}</div>
                        <div><strong><i class="fas fa-users mr-1"></i>Workers Used:</strong> ${result.requested_workers}</div>
                        <div><strong><i class="fas fa-server mr-1"></i>Parallel Threshold:</strong> ${result.system_info.parallel_threshold.toLocaleString()}</div>
                        <div><strong><i class="fas fa-chart-line mr-1"></i>Performance Gain:</strong> ${parallelResult ? `${((parallelResult.speedup - 1) * 100).toFixed(1)}%` : 'N/A'}</div>
                    </div>
                `;
                
                document.getElementById('benchmarkResults').classList.remove('hidden');
                
            } catch (error) {
                alert('Error: ' + error.message);
                console.error('Benchmark error:', error);
            } finally {
                benchmarkRunning = false;
                this.innerHTML = '<i class="fas fa-rocket mr-2"></i>Run Performance Benchmark';
                this.disabled = false;
            }
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initChart();
            updateWorkerIndicators();
            
            // Update worker indicators when settings change
            document.getElementById('numWorkers').addEventListener('change', updateWorkerIndicators);
            document.getElementById('processingMethod').addEventListener('change', updateWorkerIndicators);
        });
    </script>
</body>
</html>
